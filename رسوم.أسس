اشمل "مـتم/طـرفية.أسس"؛
اشمل "مـتم/نـظام.أسس"؛
اشمل "مـتم/نـم.أسس"؛
اشمل "مـحا.أسس"؛
مـحا.اشمل_ملف("Alusus/Sdl2"، "طـوب.أسس")؛

@تصدير[exit] دالة اخرج (حالة: صحيح);

إذا طـوب.هيئ(طـوب._تهيئة_عصا_التحكم_) != 0 {
  مـتم.طـرفية.اطبع("فشلت تهئية مكتبة ط.و.ب.\ج")؛
  اخرج(1)؛
}؛

إذا طـوب.صـورة.هيئ(طـوب.صـورة._تهيئة_بنج_) != طـوب.صـورة._تهيئة_بنج_ {
  مـتم.طـرفية.اطبع("فشلت تهيئة مكتبة صورة ط.و.ب\ج")؛
  اخرج(1)؛
}؛

إذا طـوب.سـمعي.هيئ(44100، طـوب.سـمعي.بـنية._مبدئي_، 2، 2048) < 0 {
  مـتم.طـرفية.اطبع("فشلت تهيئة مكتبة السمعيات\ج")؛
  اخرج(1)؛
}؛
طـوب.كـتابة.هيئ()؛
عرف خط_كبير : مؤشر[طـوب.كـتابة.خـط]
خط_كبير = طـوب.كـتابة.افتح_خط("AlususMono.otf"، 40)؛
  إذا خط_كبير == 0 {
    مـتم.طـرفية.اطبع("فشل تحميل الخط.\ج")؛
    اخرج(1)؛
  }؛
  

عرف نافذة: مؤشر[طـوب.نـافذة] = طـوب.نـافذة.أنشئ("زياد"، 0، 0، 1280، 720، 0)؛
إذا نافذة == 0 {
  مـتم.طـرفية.اطبع("فشل إنشاء النافذة\ج")؛
  اخرج(1)؛
}؛

طـوب.عين_تلميح(طـوب.تـلميحات._رسوم_جودة_التحجيم_، "linear")؛

عرف رسام: مؤشر[طـوب.رسـام] = طـوب.رسـام.أنشئ(نافذة، -1، طـوب.رسـام.عـلامات._مسرع_)؛
إذا رسام == 0 {
  مـتم.طـرفية.اطبع("فشل إنشاء الرسام\ج")؛
  اخرج(1)؛
}؛

دالة اطمغ (نقش: مؤشر[طـوب.نـقش]، س: صحيح، ص: صحيح)
{
  عرف مستطيل: طـوب.مـستطيل؛
  مستطيل.س = س؛
  مستطيل.ص = ص؛
  طـوب.نـقش.استفهم(نقش، 0، 0، مستطيل.ع~مؤشر، مستطيل.ط~مؤشر)؛
  طـوب.رسـام.انسخ(رسام، نقش، 0، مستطيل~مؤشر)؛
}؛

عرف عصا0: مؤشر[طـوب.عـصا_التحكم]؛
عرف عصا1: مؤشر[طـوب.عـصا_التحكم]؛
عرف هيئ_عصا_التحكم: دالة
{
  إذا طـوب.هيئ(طـوب._تهيئة_عصا_التحكم_) == 0 {
    إذا طـوب.عـصا_التحكم.هات_عددها() >= 2 {
      عصا0 = طـوب.عـصا_التحكم.افتح(0)؛
      عصا1 = طـوب.عـصا_التحكم.افتح(1)؛
      مـتم.طـرفية.اطبع("تم تهيئة عصا التحكم\ج")؛
    } وإلا {
      إذا طـوب.عـصا_التحكم.هات_عددها() >= 1 {
        عصا0 = طـوب.عـصا_التحكم.افتح(0)؛
        مـتم.طـرفية.اطبع("تم تهيئة عصا التحكم\ج")؛
      } وإلا {
        مـتم.طـرفية.اطبع("لم نجد عصا تحكم\ج")؛
        اخرج(1)؛
      }؛
    }؛
  } وإلا {
    مـتم.طـرفية.اطبع("فشل تهيئة مكتبة الوسائط\ج")؛
    اخرج(1)؛
  }؛
}؛

دالة افحص_الخروج
{
  عرف حدث: طـوب.حـدث؛
  بينما طـوب.استشعر_حدث(حدث~مؤشر) != 0 {
    إذا حدث.نوع == طـوب.حـدث._خروج_ اخرج(0)؛
  }؛
}؛

